{"version":3,"sources":["webpack:///./src/views/CheesecakePage.vue?bd68","webpack:///./src/views/CheesecakePage.vue","webpack:///./src/views/CheesecakePage.vue?a8eb"],"names":["class","style","id","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_AnimatedButton","notifyParent","$options","openModal","_component_SuccessModal","isSuccessModalOpen","$data","onCloseModal","closeModal","_Transition","name","isModalOpen","onClick","_cache","args","handleClickOutside","_withModifiers","ref","onSubmit","addComment","onMouseleave","$event","showAvatarPicker","_hoisted_3","type","onChange","handleFileChange","accept","for","onMouseover","src","avatarPreview","alt","_hoisted_5","_Fragment","_renderList","avatars","avatar","key","selectAvatar","avatarError","_hoisted_8","onInput","handleNameInput","userName","placeholder","nameError","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","contenteditable","handleCommentInput","data-placeholder","onKeydown","limitTextLength","onFocus","showPicker","commentError","_hoisted_12","_hoisted_13","_hoisted_14","commentLength","_hoisted_15","togglePicker","_hoisted_16","emojis","emoji","selectEmoji","_hoisted_19","star","_normalizeClass","filled","tempRating","empty","hoverRating","resetRating","setRating","_hoisted_20","$setup","item","_hoisted_21","_hoisted_22","_hoisted_23","images","image","index","active","selectedTab","changeTab","sort","_hoisted_24","_hoisted_25","_hoisted_26","hide","data-target","saveItem","saved","_hoisted_29","des","_component_Count","buyNumber","getCookie","value","document","cookie","parts","split","length","pop","shift","setCookie","days","expires","date","Date","setTime","getTime","toUTCString","components","SuccessModal","AnimatedButton","Count","setup","globalStore","useGlobalStore","store","useStore","route","useRoute","router","useRouter","Number","query","tab","count","computed","currentItem","items","find","i","_item$value","map","undefined","getters","itemsCheesecake","i18n","global","t","nameKey","Array","isArray","d","updateItem","itemId","params","watchEffect","push","data","pageId","this","globalRating","comments","commentCount","averageRating","frontUserId","uuidv4","userAvatar","commentText","maxCommentLength","totalPages","Math","ceil","commentsPerPage","paginatedComments","start","currentPage","end","slice","visiblePages","pages","startPage","endPage","showFirstEllipsis","showLastEllipsis","methods","event","clickedButton","target","closest","clickedButtonAttr","getAttribute","storedTargets","JSON","parse","localStorage","getItem","includes","setItem","stringify","setTimeout","setAttribute","selectedImage","selectedText","selectedCount","selectedMin","min","selectedMax","max","dataToSave","now","description","response","fetch","process","method","headers","body","ok","Error","result","json","console","log","getitemsLangth","error","$refs","editableDiv","innerText","$","clearCommentError","addClass","preventDefault","removeClass","clearNameError","clearAvatarError","file","files","startsWith","URL","createObjectURL","alert","test","replace","innerHTML","trim","$t","formData","FormData","append","File","fetchComments","message","closeSuccessModal","rating","saveGlobalRating","range","createRange","sel","window","getSelection","focus","rangeCount","setStart","getRangeAt","startContainer","startOffset","collapse","imgTag","emojiNode","DOMParser","parseFromString","firstChild","contains","deleteContents","insertNode","setStartAfter","removeAllRanges","addRange","modalContent","formatDate","dateString","isNaN","toLocaleDateString","mounted","then","buttons","saveButton","forEach","button","__exports__","render"],"mappings":"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","file":"js/chunk-29469c78.417f9588.js","sourcesContent":["export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CheesecakePage.vue?vue&type=style&index=0&id=8c3f0144&lang=scss\"","<template>\r\n  <div class=\"center chess-cake df f-dir-clmn j-spc-btwn\" style=\"padding-top: 150px; min-height: 100vh\">\r\n\r\n    <div id=\"comments\" class=\"\">\r\n\r\n      <AnimatedButton :notifyParent=\"openModal\"/>\r\n\r\n      <!-- Success Modal -->\r\n      <SuccessModal\r\n          :isSuccessModalOpen=\"isSuccessModalOpen\"\r\n          @close-modal=\"closeModal\"\r\n      />\r\n\r\n      <!-- The Modal -->\r\n      <transition name=\"modal-fade\">\r\n        <div v-if=\"isModalOpen\" class=\"modal\" @click=\"handleClickOutside\">\r\n          <div class=\"modal-content\" @click.stop ref=\"modalContent\">\r\n            <span class=\"close\" @click=\"closeModal\">&times;</span>\r\n            <form @submit.prevent=\"addComment\">\r\n              <div class=\"img-box-file\" @mouseleave=\"showAvatarPicker = false\">\r\n                <div class=\"avatar-box\">\r\n                  <input type=\"file\"  @change=\"handleFileChange\" id=\"file\" name=\"avatar\" accept=\"image/*\" style=\"display: none\">\r\n                  <label for=\"file\" style=\"cursor: pointer; poition: relative;\" @mouseover=\"showAvatarPicker = true\">\r\n                    <img :src=\"avatarPreview || 'avatars-img/avatar-default.png'\" alt=\"avatar\" class=\"avatar\">\r\n                    <div v-if=\"showAvatarPicker\" class=\"avatar-picker\">\r\n                      <div v-for=\"avatar in avatars\" :key=\"avatar.src\" @click.stop.prevent=\"selectAvatar(avatar)\" class=\"avatar-item\">\r\n                        <img :src=\"avatar.src\" :alt=\"avatar.alt\" class=\"avatar-preview\">\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                  <span v-if=\"avatarError\" class=\"error\"></span>\r\n                </div>\r\n\r\n\r\n                <div>\r\n                  <input class=\"input__name\" type=\"text\" @input=\"handleNameInput\" v-model=\"userName\" placeholder=\"Your Name\">\r\n                  <span v-if=\"nameError\" class=\"error\">{{ nameError }}</span>\r\n                </div>\r\n\r\n              </div>\r\n              <div class=\"editable-div-box\">\r\n\r\n                <div class=\"editable-div-box-wrapper\">\r\n                  <div\r\n                      class=\"editable-div\"\r\n                      contenteditable=\"true\"\r\n                      ref=\"editableDiv\"\r\n                      @input=\"handleCommentInput\"\r\n                      data-placeholder=\"Type your comment here...\"\r\n                      @keydown=\"limitTextLength\"\r\n                      @focus=\"showPicker = false\"\r\n                  ></div>\r\n                  <span v-if=\"commentError\" class=\"error\">{{ commentError }}</span>\r\n                </div>\r\n\r\n                <div class=\"character-count\" style=\"color: black\"> <span  class=\"text-length\">{{ commentLength }}</span>/300</div>\r\n                <div class=\"emoji-picker\">\r\n                  <button @click=\"togglePicker\" type=\"button\">\r\n                    <img src=\"emojis/3.gif\" alt=\"🥰\">\r\n                  </button>\r\n                  <div v-if=\"showPicker\" class=\"emoji-list\">\r\n                    <div v-for=\"emoji in emojis\" :key=\"emoji.src\" @click=\"selectEmoji(emoji)\" class=\"emoji-item\">\r\n                      <img :src=\"emoji.src\" :alt=\"emoji.alt\" />\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"stars\">\r\n                  <span v-for=\"star in 5\" :key=\"star\" class=\"star\" :class=\"{ filled: star <= tempRating, empty: star > tempRating }\" @mouseover=\"hoverRating(star)\" @mouseleave=\"resetRating\" @click=\"setRating(star)\">\r\n                      ★\r\n                  </span>\r\n              </div>\r\n              <button class=\"btn btn--submit\" type=\"submit\">Add Comment</button>\r\n            </form>\r\n\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n\r\n    <div v-if=\"item\">\r\n      <h2 class=\"item__name fs28\">{{ item.name }}</h2>\r\n\r\n      <!-- Tab navigation -->\r\n      <div class=\"tabs\">\r\n        <button\r\n            class=\"tab-btn\"\r\n            v-for=\"(image, index) in item.images\"\r\n            :key=\"index\"\r\n            ref=\"tabButton\"\r\n            :class=\"{ active: selectedTab === index + 1 }\"\r\n            @click=\"changeTab(index)\">\r\n          {{ item.sort[index] }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Tab content -->\r\n      <div class=\"tab-content\">\r\n        <figure class=\"tab-content__img-box pr\">\r\n          <img :src=\"item.images[selectedTab - 1].src\" :alt=\"`Image ${selectedTab + 1}`\" />\r\n          <button\r\n              class=\"btn btn--save pa\"\r\n              v-for=\"(image, index) in item.images\"\r\n              :key=\"index\"\r\n              ref=\"saveButton\"\r\n              :class=\"{ hide: selectedTab !== index + 1 }\"\r\n              :data-target=\"item.sort[index]\"\r\n              @click=\"saveItem($event)\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64px\" height=\"64px\" viewBox=\"-2.4 -2.4 28.80 28.80\" fill=\"none\" stroke=\"#c21919\">\r\n\r\n              <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"/>\r\n\r\n              <g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n\r\n              <g id=\"SVGRepo_iconCarrier\"> <path d=\"M15.7 4C18.87 4 21 6.98 21 9.76C21 15.39 12.16 20 12 20C11.84 20 3 15.39 3 9.76C3 6.98 5.13 4 8.3 4C10.12 4 11.31 4.91 12 5.71C12.69 4.91 13.88 4 15.7 4Z\" stroke=\"#ff0000\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </g>\r\n\r\n            </svg>\r\n          </button>\r\n        </figure>\r\n\r\n        <transition name=\"fade\">\r\n          <div v-if=\"saved\" class=\"info-save\">\r\n            Item is saved successfully in wishlist\r\n          </div>\r\n        </transition>\r\n\r\n        <p>{{ item.des[selectedTab - 1] }}</p>\r\n      </div>\r\n    </div>\r\n    <Count :buyNumber=\"buyNumber\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watchEffect } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport {useGlobalStore} from \"../store/useGlobalStore\";\r\n\r\nimport i18n from \"../i18n\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport AnimatedButton from \"../components/AnimatedButton\";\r\nimport Count from \"../components/Count\";\r\nimport SuccessModal from \"../components/Modal-Success\";\r\n\r\n\r\n// Helper functions for cookie management\r\nfunction getCookie(name) {\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop().split(';').shift();\r\n}\r\n\r\nfunction setCookie(name, value, days) {\r\n  let expires = \"\";\r\n  if (days) {\r\n    const date = new Date();\r\n    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n    expires = `expires=${date.toUTCString()};`;\r\n  }\r\n  document.cookie = `${name}=${value}; ${expires}path=/`;\r\n}\r\n\r\nexport default {\r\n  components: {SuccessModal, AnimatedButton, Count},\r\n  setup() {\r\n    const globalStore = useGlobalStore();\r\n    const store = useStore();\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const item = ref(null);\r\n    const selectedTab = ref(Number(route.query.tab) || 1);\r\n\r\n    // Computed property to get the count based on the selected tab\r\n    const count = computed(() => {\r\n      const currentItem = items.value.find(i => i.id === item.value?.id);\r\n      return currentItem ? currentItem.count.map(Number) : [1]; // Convert to numbers, default to [1] if no item\r\n    });\r\n\r\n    const buyNumber = computed(() => {\r\n      const index = selectedTab.value - 1; // Adjust index since selectedTab starts at 1\r\n      return count.value[index] !== undefined ? count.value[index] : 1; // Return value or default to 1\r\n    });\r\n\r\n    const items = computed(() => {\r\n      return store.getters.itemsCheesecake.map(item => ({\r\n        ...item,\r\n        name: i18n.global.t(item.nameKey), // Translate name using nameKey\r\n        des: Array.isArray(item.des) ? item.des.map(d => i18n.global.t(d)) : [i18n.global.t(item.des)],\r\n        sort: Array.isArray(item.sort) ? item.sort.map(d => i18n.global.t(d)) : [i18n.global.t(item.sort)]\r\n      }));\r\n    });\r\n\r\n    const updateItem = () => {\r\n      const itemId = route.params.id;\r\n      item.value = items.value.find(i => i.id === Number(itemId));\r\n    };\r\n\r\n    watchEffect(updateItem);\r\n    watchEffect(() => {\r\n      selectedTab.value = Number(route.query.tab) || 1;\r\n    });\r\n\r\n    const changeTab = (index) => {\r\n      selectedTab.value = index + 1;\r\n      router.push({ query: { tab: index + 1 } });\r\n    };\r\n\r\n    return { items, item, selectedTab, changeTab, buyNumber, globalStore };\r\n  },\r\n  data() {\r\n    return {\r\n      saved: false,\r\n      pageId : 'cheesecake/'+ this.item.id,\r\n      globalRating: 5,\r\n      tempRating: 5,\r\n      comments: [],\r\n      commentCount: 0,\r\n      averageRating: 0,\r\n      frontUserId: getCookie('frontUserId') || uuidv4(),\r\n      showPicker: false,\r\n      isModalOpen: false,\r\n      emojis: [\r\n        {src: 'emojis/1.gif', alt: '🤩'},\r\n        {src: 'emojis/2.gif', alt: '🥳'},\r\n        {src: 'emojis/3.gif', alt: '🥰'},\r\n        {src: 'emojis/4.gif', alt: '😃'},\r\n        {src: 'emojis/5.gif', alt: '🎂'},\r\n        {src: 'emojis/7.gif', alt: '🤯'},\r\n        {src: 'emojis/6.gif', alt: '🪩'},\r\n        {src: 'emojis/8.gif', alt: '🌟'},\r\n        {src: 'emojis/9.gif', alt: '👏'},\r\n        {src: 'emojis/10.gif', alt: '👍'},\r\n        {src: 'emojis/11.gif', alt: '🎁'},\r\n        {src: 'emojis/12.gif', alt: '🎉'},\r\n        {src: 'emojis/13.gif', alt: '💥'},\r\n        {src: 'emojis/14.gif', alt: '🐝'},\r\n        {src: 'emojis/15.gif', alt: '🎯'},\r\n        {src: 'emojis/16.gif', alt: '❣'},\r\n      ],\r\n      showAvatarPicker: false,\r\n      avatars: [\r\n        {src: 'avatars-img/avatar1.png', alt: 'Avatar 1'},\r\n        {src: 'avatars-img/avatar2.png', alt: 'Avatar 2'},\r\n        {src: 'avatars-img/avatar3.png', alt: 'Avatar 3'},\r\n        {src: 'avatars-img/avatar4.png', alt: 'Avatar 4'},\r\n        {src: 'avatars-img/avatar5.png', alt: 'Avatar 5'},\r\n        {src: 'avatars-img/avatar6.png', alt: 'Avatar 6'},\r\n        {src: 'avatars-img/avatar7.png', alt: 'Avatar 7'},\r\n        {src: 'avatars-img/avatar8.png', alt: 'Avatar 8'},\r\n        {src: 'avatars-img/avatar9.png', alt: 'Avatar 9'},\r\n        {src: 'avatars-img/avatar10.png', alt: 'Avatar 10'},\r\n        {src: 'avatars-img/avatar11.png', alt: 'Avatar 11'},\r\n        {src: 'avatars-img/avatar12.png', alt: 'Avatar 12'},\r\n      ],\r\n      userAvatar: null,\r\n      avatarPreview: '',\r\n      userName: '',\r\n      nameError: '',   // Error message for name\r\n      commentError: '', // Error message for comment\r\n      avatarError: '', // Error message for avatar\r\n      commentText: '',\r\n      commentLength: 0,\r\n      maxCommentLength: 300,\r\n      isSuccessModalOpen: false // New state for success modal\r\n\r\n    };\r\n  },\r\n  computed: {\r\n    totalPages() {\r\n      return Math.ceil(this.comments.length / this.commentsPerPage);\r\n    },\r\n    paginatedComments() {\r\n      const start = (this.currentPage - 1) * this.commentsPerPage;\r\n      const end = start + this.commentsPerPage;\r\n      return this.comments.slice(start, end);\r\n    },\r\n    visiblePages() {\r\n      const pages = [];\r\n      let startPage, endPage;\r\n\r\n      if (this.totalPages <= 5) {\r\n        // Show all pages if total is less than or equal to 5\r\n        startPage = 1;\r\n        endPage = this.totalPages;\r\n      } else {\r\n        // Calculate the start and end page based on current page\r\n        if (this.currentPage <= 3) {\r\n          // Show first 5 pages\r\n          startPage = 1;\r\n          endPage = 5;\r\n        } else if (this.currentPage + 2 >= this.totalPages) {\r\n          // Show last 5 pages\r\n          startPage = this.totalPages - 4;\r\n          endPage = this.totalPages;\r\n        } else {\r\n          // Show current page with 2 pages before and after\r\n          startPage = this.currentPage - 2;\r\n          endPage = this.currentPage + 2;\r\n        }\r\n      }\r\n\r\n      for (let i = startPage; i <= endPage; i++) {\r\n        pages.push(i);\r\n      }\r\n\r\n      return pages;\r\n    },\r\n    showFirstEllipsis() {\r\n      return this.totalPages > 5 && this.currentPage > 4;\r\n    },\r\n    showLastEllipsis() {\r\n      return this.totalPages > 5 && this.currentPage < this.totalPages - 3;\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    async saveItem(event) {\r\n\r\n      // Access the clicked button (via event.target)\r\n      const clickedButton = event.target.closest('button'); // Use closest to ensure you get the button element\r\n      const clickedButtonAttr = clickedButton.getAttribute('data-target');\r\n\r\n      // Get existing targets from localStorage, or initialize as empty array\r\n      const storedTargets = JSON.parse(localStorage.getItem(\"data-target\")) || [];\r\n\r\n      // Add the clicked button's target to the list if it's not already present\r\n      if (!storedTargets.includes(clickedButtonAttr)) {\r\n        storedTargets.push(clickedButtonAttr);\r\n        localStorage.setItem(\"data-target\", JSON.stringify(storedTargets));\r\n      }\r\n\r\n      this.saved = true\r\n      setTimeout( ()=> this.saved = false, 3000)\r\n\r\n\r\n      // Add the 'active' class to the clicked button\r\n      clickedButton.setAttribute('active','true');\r\n\r\n      const selectedImage = this.item.images[this.selectedTab - 1];\r\n      const selectedText = this.item.sort[this.selectedTab - 1];\r\n      const selectedCount = this.item.count[this.selectedTab - 1];\r\n      const selectedMin = this.item.min[this.selectedTab - 1];\r\n      const selectedMax = this.item.max[this.selectedTab - 1];\r\n      // const selectedTab = this.selectedTab - 1\r\n\r\n      const dataToSave = {\r\n        id: Date.now(),\r\n        image: selectedImage.src,\r\n        description: selectedText,\r\n        count: selectedCount,\r\n        min: selectedMin,\r\n        max: selectedMax,\r\n        // selected : selectedTab\r\n      };\r\n\r\n      try {\r\n        const response = await fetch(process.env.VUE_APP_SAVE_ITEMS_API_URL, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(dataToSave),\r\n\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to save active tab content');\r\n        }\r\n\r\n        const result = await response.json();\r\n        console.log('Save successful:', result);\r\n\r\n        this.globalStore.getitemsLangth();\r\n\r\n      } catch (error) {\r\n        console.error('Error saving active tab content:', error);\r\n      }\r\n    },\r\n\r\n    handleCommentInput() {\r\n      this.commentText = this.$refs.editableDiv.innerText;\r\n      this.commentLength = this.commentText.length + $('.editable-div').find('img').length;\r\n      this.clearCommentError();\r\n    },\r\n    limitTextLength(event) {\r\n      if (this.commentLength >= this.maxCommentLength && event.key !== \"Backspace\" && event.key !== \"Delete\") {\r\n        $('.text-length').addClass('anim')\r\n        event.preventDefault();\r\n      }else{\r\n        $('.text-length').removeClass('anim')\r\n      }\r\n    },\r\n\r\n    clearNameError() {\r\n      this.nameError = '';\r\n    },\r\n\r\n    clearCommentError() {\r\n      this.commentError = '';\r\n    },\r\n\r\n    clearAvatarError() {\r\n      this.avatarError = '';\r\n    },\r\n\r\n    handleFileChange(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        if (file.type.startsWith('image/')) {\r\n          this.userAvatar = file;\r\n          this.avatarPreview = URL.createObjectURL(file);\r\n          this.clearAvatarError(); // Clear avatar error when a valid file is selected\r\n        } else {\r\n          alert('Please select a valid image file.');\r\n          this.userAvatar = null;\r\n          this.avatarPreview = 'avatars-img/avatar-default.png';\r\n          this.avatarError = 'Invalid image file.';\r\n        }\r\n      }\r\n    },\r\n\r\n    // Call this method when the user selects an avatar\r\n    selectAvatar(avatar) {\r\n      this.userAvatar = avatar.src;\r\n      this.avatarPreview = avatar.src;\r\n      this.clearAvatarError(); // Clear avatar error when a valid avatar is selected\r\n      this.showAvatarPicker = false;\r\n    },\r\n\r\n    // Call this method when the user types in the name field\r\n    handleNameInput() {\r\n      const value = event.target.value;\r\n      if (/[^a-zA-Z\\s]/.test(value)) {\r\n        this.userName = value.replace(/[^a-zA-Z\\s]/g, '');\r\n      }\r\n      this.clearNameError();\r\n    },\r\n    // Existing methods...\r\n    async addComment() {\r\n      this.nameError = ''; // Reset error message\r\n      this.commentError = ''; // Reset error message\r\n      this.avatarError = ''; // Reset avatar error message\r\n\r\n      const commentText = this.$refs.editableDiv.innerHTML.trim();\r\n\r\n      if (!this.userName) {\r\n        this.nameError = this.$t('error-message.name');\r\n      }\r\n\r\n      if (!commentText) {\r\n        this.commentError = this.$t('error-message.comment');\r\n      }\r\n\r\n      if (!this.userAvatar) {\r\n        this.avatarError = 'Avatar is required.';\r\n      }\r\n\r\n      if (this.userName && commentText && this.userAvatar) {\r\n        try {\r\n          const formData = new FormData();\r\n          formData.append('text', commentText);\r\n          formData.append('rating', this.globalRating);\r\n          formData.append('userId', this.frontUserId);\r\n          formData.append('name', this.userName);\r\n          formData.append('pageId', this.pageId);\r\n          formData.append('selectedTab', this.selectedTab); // Add the selected tab to FormData\r\n\r\n\r\n          if (this.userAvatar instanceof File) {\r\n            formData.append('avatar', this.userAvatar); // For file object\r\n          } else if (this.userAvatar) {\r\n            formData.append('avatar', this.userAvatar); // If using URL, though this should not be the case\r\n          }\r\n\r\n          const response = await fetch(process.env.VUE_APP_COMMENTS_API_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n          });\r\n\r\n          if (!response.ok) throw new Error('Failed to add comment');\r\n\r\n          // Clear fields and close modal\r\n          this.$refs.editableDiv.innerHTML = '';\r\n          this.userName = '';\r\n          this.userAvatar = null;\r\n          this.avatarPreview = 'avatars-img/avatar-default.png'; // Reset preview\r\n          this.closeModal();\r\n\r\n          // Fetch comments and adjust pagination\r\n          await this.fetchComments();\r\n          // Move to last page after adding a comment\r\n          this.currentPage = this.totalPages;\r\n\r\n          // Open success modal\r\n          this.isSuccessModalOpen = true;\r\n        } catch (error) {\r\n          console.error('Error adding comment:', error);\r\n          alert(`Error adding comment: ${error.message}`);\r\n        }\r\n      }\r\n    },\r\n\r\n    closeSuccessModal() {\r\n      this.isSuccessModalOpen = false;\r\n    },\r\n    async fetchComments() {\r\n      try {\r\n        const response = await fetch(process.env.VUE_APP_COMMENTS_API_URL);\r\n        if (!response.ok) throw new Error('Failed to fetch comments');\r\n        const data = await response.json();\r\n        this.comments = data.comments;\r\n        this.globalRating = this.globalRating || data.globalRating;\r\n        this.tempRating = this.globalRating;\r\n        this.commentCount = data.comments.length;\r\n        this.averageRating = data.averageRating || 0;\r\n\r\n        // Ensure current page is adjusted if needed\r\n        if (this.currentPage > this.totalPages) {\r\n          this.currentPage = this.totalPages;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching comments:', error);\r\n      }\r\n    },\r\n    async saveGlobalRating() {\r\n      try {\r\n        const response = await fetch(process.env.VUE_APP_GLOBAL_RATING_API_URL, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ rating: this.globalRating })\r\n        });\r\n\r\n        if (!response.ok) throw new Error('Failed to save global rating');\r\n        await this.fetchComments();\r\n      } catch (error) {\r\n        console.error('Error saving global rating:', error);\r\n      }\r\n    },\r\n    setRating(star) {\r\n      this.globalRating = star;\r\n      this.saveGlobalRating();\r\n    },\r\n    hoverRating(star) {\r\n      this.tempRating = star;\r\n    },\r\n    resetRating() {\r\n      this.tempRating = this.globalRating;\r\n    },\r\n    togglePicker() {\r\n      this.showPicker = !this.showPicker;\r\n    },\r\n    selectEmoji(emoji) {\r\n      const editableDiv = this.$refs.editableDiv;\r\n      const range = document.createRange();\r\n      const sel = window.getSelection();\r\n\r\n      if(this.commentLength >= 300) {\r\n        $('.text-length').addClass('anim')\r\n        setTimeout( ()=> this.showPicker = false,1000);\r\n        return\r\n      }\r\n\r\n      // Ensure that the editableDiv has focus\r\n      editableDiv.focus();\r\n\r\n      if (sel.rangeCount > 0) {\r\n        // Use the current selection range\r\n        range.setStart(sel.getRangeAt(0).startContainer, sel.getRangeAt(0).startOffset);\r\n        range.collapse(true);\r\n      } else {\r\n        // Start from the beginning if no selection\r\n        range.setStart(editableDiv, 0);\r\n        range.collapse(true);\r\n      }\r\n\r\n      // Create the emoji node and insert it at the range\r\n      const imgTag = `<img style=\"vertical-align: middle; width: 20px; margin: 0 2px;\" src=\"${emoji.src}\" alt=\"${emoji.alt}\" />`;\r\n      const emojiNode = new DOMParser().parseFromString(imgTag, 'text/html').body.firstChild;\r\n\r\n      // Ensure emoji is inserted only within the editableDiv\r\n      if (editableDiv.contains(range.startContainer)) {\r\n        range.deleteContents(); // Optional: Remove any existing content at cursor\r\n        range.insertNode(emojiNode);\r\n        range.setStartAfter(emojiNode); // Move cursor after the inserted emoji\r\n        range.collapse(true);\r\n\r\n        // Apply the range and focus the editableDiv\r\n        sel.removeAllRanges();\r\n        sel.addRange(range);\r\n        editableDiv.focus();\r\n      }\r\n\r\n      this.handleCommentInput();\r\n\r\n      // Close the emoji picker\r\n      this.showPicker = false;\r\n    },\r\n\r\n    handleClickOutside(event) {\r\n      if (!this.$refs.modalContent.contains(event.target)) {\r\n        this.closeModal();\r\n      }\r\n    },\r\n    openModal() {\r\n      this.isModalOpen = true;\r\n    },\r\n    closeModal() {\r\n      this.isModalOpen = false;\r\n      this.showPicker = false;\r\n      this.userName = '';\r\n      this.globalRating = 5\r\n      this.tempRating = 5\r\n      this.avatarPreview = 'avatars-img/avatar-default.png';\r\n      this.isSuccessModalOpen = false\r\n    },\r\n\r\n    formatDate(dateString) {\r\n      // Ensure the dateString is a valid ISO 8601 date string\r\n      const date = new Date(dateString);\r\n\r\n      // Check if date is valid\r\n      if (isNaN(date.getTime())) {\r\n        return 'Invalid Date';\r\n      }\r\n\r\n      // Return formatted date in locale format\r\n      return date.toLocaleDateString();\r\n    }\r\n  },\r\n  mounted() {\r\n    if (!getCookie('frontUserId')) {\r\n      setCookie('frontUserId', this.frontUserId, 365);\r\n    }\r\n    this.fetchComments().then(() => {\r\n      this.currentPage = 1;\r\n    });\r\n\r\n    // Retrieve stored active target(s) from localStorage\r\n    const storedTargets = JSON.parse(localStorage.getItem(\"data-target\")) || [];\r\n    this.storedTargets = storedTargets;\r\n\r\n    // Loop through each button and check if its data-target matches any stored target\r\n    const buttons = this.$refs.saveButton;\r\n\r\n    buttons.forEach(button => {\r\n      const target = button.getAttribute('data-target');\r\n      if (this.storedTargets.includes(target)) {\r\n        // Add the 'active' class to the button if its target is in storedTargets\r\n        button.setAttribute('active','true')\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n.chess-cake {\r\n  padding-bottom: 0 !important;\r\n}\r\n\r\n.item__name {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.info-save {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  font-size: 32px;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: rgba(0, 0, 0, .5);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 0.5s ease-in-out; /* Adjust duration as needed */\r\n}\r\n\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0; /* Start or end with opacity 0 */\r\n}\r\n\r\n.fade-enter-to, .fade-leave-from {\r\n  opacity: 1; /* Fully visible */\r\n}\r\n\r\n</style>","import { render } from \"./CheesecakePage.vue?vue&type=template&id=8c3f0144\"\nimport script from \"./CheesecakePage.vue?vue&type=script&lang=js\"\nexport * from \"./CheesecakePage.vue?vue&type=script&lang=js\"\n\nimport \"./CheesecakePage.vue?vue&type=style&index=0&id=8c3f0144&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\WebstormProjects\\\\testforgitvue\\\\www.nuan\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}